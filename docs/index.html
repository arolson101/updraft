<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Updraft Index</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	
	<link type="text/css" rel="stylesheet" href="styles/site.journal.css">
	
</head>

<body>
<div class="container-fluid">
	<div class="navbar navbar-fixed-top ">
		<div class="navbar-inner">
			<a class="brand" href="index.html">Updraft</a>
			<ul class="nav">
				
				<li class="dropdown">
					<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="ExampleModel.html">ExampleModel</a>
						</li>
						
						<li>
							<a href="Instance.html">Instance</a>
						</li>
						
						<li>
							<a href="Model.html">Model</a>
						</li>
						
						<li>
							<a href="Query.html">Query</a>
						</li>
						
						<li>
							<a href="Set.html">Set</a>
						</li>
						
						<li>
							<a href="Store.html">Store</a>
						</li>
						

					</ul>
				</li>
				
			</ul>
		</div>
	</div>

	<div class="row-fluid">

		
		<div class="span8">
			
				<div id="main">
					


	
	<span class="page-title">Index</span>
	
	












	
	





    <section>
        <article><h1 id="updraft">Updraft</h1>
<p><code>Updraft</code> is an asynchronous Javascript object-relational mapping (ORM)-like library, very similar to 
<a href="https://github.com/coresmart/persistencejs">persistence.js</a>.  It can work in the browser, on a server using
node.js, or in a <a href="https://cordova.apache.org/">Cordova</a> app using the <a href="https://github.com/brodysoft/Cordova-SQLitePlugin">SQLitePlugin</a>
(basically, anywhere WebSQL or a WebSQL-like interface is supported).  It does not support MySQL, in-memory, 
local storage, or IndexedDB.</p>
<h2 id="status">Status</h2>
<p><code>Updraft</code> has not yet been used in any project and is still under heavy development.  Expect bugs.
You shouldn&#39;t use it if you know nothing about SQL.</p>
<p>Sync is planned but not implemented.</p>
<h2 id="motivations">Motivations</h2>
<ul>
<li>Automatic schema migration (within reason)</li>
<li>Syncing with cloud-based databases, like <a href="https://www.dropbox.com/developers/sync">Dropbox&#39;s Sync API</a> 
or <a href="https://developer.apple.com/icloud/documentation/cloudkit-storage/">iCloud&#39;s CloudKit</a></li>
<li>Modern best practices- asynchronous programming using <a href="https://www.promisejs.org/">Promises</a> and
<a href="http://en.wikipedia.org/wiki/Test-driven_development">Test-driven development</a></li>
</ul>
<h2 id="important-differences-from-other-orm-frameworks">Important differences from other ORM frameworks</h2>
<p>You should think of <code>Updraft</code> as more of a wrapper over executing SQL statements yourself, rather than a complete ORM
framework.  Objects won&#39;t be cached or saved unless you do it yourself.  You will have to define your primary key 
(probably <code>id</code>) as well as create and assign a unique <code>id</code> (more on that later).</p>
<p>You also won&#39;t find one-to-one or many-to-many or other SQL-centric ideas.  You can define a field of type &#39;ptr&#39;, 
where its value will be another object&#39;s key, or of type &#39;set&#39; where you can have a (homogeneous) set of values or
object keys.  You will be responsible for tracking object lifetimes and deleting any orphaned entities.</p>
<h2 id="dependencies">Dependencies</h2>
<p>You need a JS environment that <a href="http://caniuse.com/#feat=promises">supports Promises</a> or you can use a library like 
<a href="https://github.com/calvinmetcalf/lie">lie</a>.</p>
<p>You will also need a not-ancient js environment that <a href="http://kangax.github.io/compat-table/es5/#Object.defineProperty">supports <code>Object.defineProperty</code></a></p>
<h2 id="installation">Installation</h2>
<p>Using Bower:</p>
<pre><code>bower install updraft
</code></pre><p>Or grab the <a href="https://github.com/arolson101/updraft/dist/updraft.js">source</a> (<a href="https://github.com/arolson101/updraft/dist/updraft.min.js">minified</a>).</p>
<h2 id="usage">Usage</h2>
<p>Basic usage is as follows:</p>
<pre><code>var store = new Updraft.Store();

var Task = store.createClass({
  tableName: &#39;tasks&#39;,
  columns: {
    name: { type: &#39;text&#39;, key: true },
    description: { type: &#39;text&#39; },
    done: { type: &#39;bool&#39; }
  }
});

store.open({name: &#39;my database&#39;})
  .then(function() {

    store.set(&#39;username&#39;, &#39;John Smith&#39;);
    store.set(&#39;favoriteTags&#39;, [&#39;happy&#39;, &#39;sad&#39;]);

    var task = new Task();
    task.name = &quot;create a task&quot;;
    task.description = &quot;task description&quot;;

    store.save([task])
      .then(function() {

        // task saved!

        Task.get(&quot;create a task&quot;)
          .then(function(task) {

            // task retrieved!

          });
      });
  });
</code></pre><p>For advanced usage, see the documentation.</p>
<h2 id="enums">Enums</h2>
<p>Updraft supports enum-like objects, such as those created using the <a href="https://github.com/adrai/enum">enum</a> library, though
there&#39;s no dependency on any specific library.  They will be saved as the object&#39;s &#39;toString()&#39; value and restored using the
class&#39;s &#39;get(value)&#39; method.  If you use the aforementioned enum library, they will be saved in the db as strings.</p>
<pre><code>var store = new Updraft.Store();

var ColorTemperature = new Enum({&#39;Cool&#39;, &#39;Neutral&#39;, &#39;Warm&#39;});

var Paint = store.createClass({
  tableName: &#39;paints&#39;,
  columns: {
    name: { type: &#39;text&#39;, key: true },
    colorTemp: { type: &#39;enum&#39;, enum: ColorTemperature }
  }
});

var paint = new Paint();
paint.colorTemp = ColorTemperature.Cool;
...
Paint.all.where(&#39;colorTemp&#39;, &#39;=&#39;, ColorTemperature.Cool).get().then(...);
</code></pre><h2 id="schemas-and-migration">Schemas and Migration</h2>
<p>For most simple changes, <code>Updraft</code> will have you covered.  You can feel free to add a new field, a new class, remove
fields or classes, add or remove indices, and rename fields without needing to do any extra work.  You can also change
field types, but because the underlying database is SQLite, the &#39;type&#39; is only a column 
<a href="https://www.sqlite.org/datatype3.html">affinity</a>- no schema change/migration will happen; you can always store any
type (int/string/blob/etc) in any field.</p>
<p>Not supported:</p>
<ul>
<li>changing the primary key</li>
<li>changing table names</li>
<li>multi-column primary keys</li>
</ul>
<h2 id="documentation">Documentation</h2>
<p>Start with <code>docs/MAIN.md</code>.</p>
<h2 id="contributing">Contributing</h2>
<p>We&#39;ll check out your contribution if you:</p>
<ul>
<li>Provide a comprehensive suite of tests for your fork.</li>
<li>Have a clear and documented rationale for your changes.</li>
<li>Package these up in a pull request.</li>
</ul>
<p>We&#39;ll do our best to help you out with any contribution issues you may have.</p>
<h2 id="license">License</h2>
<p>MIT. See <code>LICENSE.txt</code> in this directory.</p>
</article>
    </section>







				</div>

				<div class="clearfix"></div>
				<footer>
					
					
		<span class="jsdoc-message">
		Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha5</a>
		on Wed Mar 18 2015 21:02:11 GMT-0500 (CDT) using the <a href="https://github.com/terryweiss/docstrap">DocStrap template</a>.
		</span>
				</footer>
			</div>

			
			<div class="span3">
				<div id="toc"></div>
			</div>
			
			<br clear="both">
		</div>

	</div>
	<script src="scripts/sunlight.js"></script>
	<script src="scripts/sunlight.javascript.js"></script>
	<script src="scripts/sunlight-plugin.doclinks.js"></script>
	<script src="scripts/sunlight-plugin.linenumbers.js"></script>
	<script src="scripts/sunlight-plugin.menu.js"></script>
	<script src="scripts/jquery.min.js"></script>
	<script src="scripts/jquery.scrollTo.js"></script>
	<script src="scripts/jquery.localScroll.js"></script>
	<script src="scripts/bootstrap-dropdown.js"></script>
	<script src="scripts/toc.js"></script>


	<script>  Sunlight.highlightAll({lineNumbers:false,  showMenu: true, enableDoclinks :true}); </script>

	<script>
		$( function () {
			$( "#toc" ).toc( {
				selectors   : "h1,h2,h3,h4",
				showAndHide : false,
				scrollTo    : 60
			} );
			$( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
			$( "#main span[id^='toc']" ).addClass( "toc-shim" );

		} );
	</script>

	

</body>
</html>